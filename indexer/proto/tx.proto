syntax = "proto3";
package mmn;

option go_package = "mmn/proto;proto";

message TxMsg { 
  int32 type = 1;
  string sender = 2;
  string recipient = 3;
  uint64 amount = 4;
  uint64 timestamp = 5;
  string text_data = 6;
  uint64 nonce = 7;
}

message SignedTxMsg {
  TxMsg tx_msg = 1;
  string signature = 2;
}

message TxResponse { 
  bool   ok    = 1; 
  string error = 2; 
}

message AddTxResponse {
  bool   ok      = 1;
  string tx_hash = 2;
  string error   = 3;
}

message GetTxByHashRequest {
  string tx_hash = 1;
}

message TxInfo {
  string sender = 1;
  string recipient = 2;
  uint64 amount = 3;
  uint64 timestamp = 4;
  string text_data = 5;
}

message GetTxByHashResponse {
  string error = 1;
  TxInfo tx = 2;
}

service TxService {
  rpc TxBroadcast (SignedTxMsg) returns (TxResponse);
  rpc AddTx (SignedTxMsg) returns (AddTxResponse);
  rpc GetTxByHash (GetTxByHashRequest) returns (GetTxByHashResponse);
}
